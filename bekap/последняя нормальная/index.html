<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>MellStarGame</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <link rel="stylesheet" href="style.css" />
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Orbitron:wght@700&display=swap" rel="stylesheet">
</head>
<body>
  <div class="container">

    <!-- Header -->
    <header class="header">
      <div class="logo">MellStarGame</div>
      <p class="welcome">Удерживай таймер — получай звёзды!</p>
    </header>

    <!-- ГЛАВНАЯ -->
    <section id="home" class="page active">
      <h1 class="greeting">Привет, <span id="username">Гость</span>!</h1>

      <!-- ЗАГОЛОВОК + КНОПКА -->
      <div class="stats-header">
        <h2 class="stats-title">Статистика аккаунта</h2>
        <button id="statsToggleBtn" class="stats-toggle-btn active">Полная</button>
      </div>

      <!-- СТАТИСТИКА -->
      <div id="statsContainer">
        <!-- РАЗВЁРНУТАЯ -->
        <div class="stats-grid">
          <!-- 1. Уровень -->
          <div class="stat-card">
            <div class="level-header">
              Уровень <span id="level" class="neon">2</span> / 45
            </div>
            <div class="level-points">-<em>очки уровня</em>-</div>
            <div class="level-row">распределено: <span id="levelSpent" class="neon">1</span></div>
            <div class="level-row">свободно: <span id="freePoints" class="neon">1</span></div>
          </div>

          <!-- 2. Рефералы -->
          <div class="stat-card">
            <div class="label ref-title">Реферальные очки</div>
            <div class="ref-row">доступно: <span id="refPoints" class="neon">4</span></div>
            <div class="ref-row">разгон: <span id="boostLevel" class="neon">25</span>%</div>
          </div>

          <!-- 3. Слоты -->
          <div class="stat-card">
            <div class="label">Слоты <span id="activeSlots">0 / 5</span></div>
            <div class="sub-text">ближайший к замене: <strong id="nextSlotTime">—</strong></div>
            <label class="notify-checkbox">
              <input type="checkbox" id="notifySlot" checked />
              <span>Уведомить</span>
            </label>
          </div>

          <!-- 4. Звёзды -->
          <div class="stat-card">
            <div class="label">Звёзд за чекпоинт:</div>
            <div class="value gold">⭐ 10</div>
            <div class="sub-text">прогресс: <span id="progressPercent">0%</span></div>
          </div>

          <!-- 5. Скорость таймера -->
          <div class="stat-card full-width">
            <div class="label">Скорость таймера: <span id="timerSpeed" class="neon">1,338</span> секунд</div>
            <div class="sub-text">прогресс: <span id="speedProgress">0%</span></div>
          </div>
        </div>

        <!-- СВЁРНУТАЯ -->
        <div id="collapsedStats" class="collapsed-stats">
          Ур. <span id="levelMini" class="neon">2</span>
          <span class="divider"></span>
          разгон: <span id="boostMini" class="neon">25</span>%
          <span class="divider"></span>
          Слоты <span id="slotsMini">0/5</span>
          <span class="divider"></span>
          ⭐ 10
          <span class="divider"></span>
          <span id="speedMini" class="neon">1,338</span>
        </div>
      </div>

      <!-- КУПЛЕННЫЕ СЛОТЫ -->
      <h3 class="stats-title" style="margin-top: 28px; text-align: center;">Статистика слотов</h3>
      <div id="adSlotsContainer">
        <div class="slot-card empty" style="justify-content: center; font-style: italic;">
          Нет купленных слотов
        </div>
      </div>

      <!-- КНОПКА КУПИТЬ -->
      <button class="buy-slot">Купить слот</button>
    </section>

    <!-- СЛОТЫ ТАЙМЕР -->
    <section id="subscriptions" class="page">
      <div class="subs-controls">
        <button id="inviteBtn" class="btn-neon">Пригласить друга</button>
        <button id="infoBtn" class="btn-neon">Инфо</button>
      </div>

      <div id="timerBox" class="timer-box">
        <div class="timer-label">Таймер:</div>
        <div id="timerDisplay" class="timer-display">00:00:00</div>
      </div>

      <!-- ПРОГРЕСС-БАР: ШАРИКИ ТОЧНО НА ШКАЛЕ -->
      <div class="progress-section">
        <div class="progress-label">Прогресс к чекпоинту</div>
        <div class="progress-bar">
          <div id="progressFill" class="progress-fill"></div>
          <div class="checkpoints">
            <div class="checkpoint passed" data-pos="0%"></div>
            <div class="checkpoint" data-pos="25%"></div>
            <div class="checkpoint" data-pos="50%"></div>
            <div class="checkpoint" data-pos="75%"></div>
            <div class="checkpoint final" data-pos="100%"></div>
          </div>
        </div>
        <div class="progress-text" id="progressText">
          <span class="current red-bold">1</span> / <span class="total neon-text">5 слотов</span>
        </div>
      </div>

      <!-- СЕТКА СЛОТОВ -->
      <div id="adSlotsGrid" class="slots-grid"></div>
    </section>

    <!-- ПРОКАЧКА — НОВАЯ ВЕРСИЯ -->
    <section id="upgrade" class="page">
      

      <!-- БЛОК 1: УРОВЕНЬ -->
      <div class="upgrade-block">
        <div class="upgrade-header">
          <div>
            <strong>Уровень <span id="currLevelDisplay">2</span> / 45</strong><br>
            <span class="small-text">Распределено: <span id="levelSpent">1</span> | Свободно: <span id="freePoints">0</span></span>
          </div>
        </div>

        <div class="upgrade-content">
          <div class="highlight-box">
            <p class="highlight-title">Распредели свободные очки!</p>
            <p class="highlight-subtitle">Доступно: <span id="availablePoints">0</span></p>
            <div class="level-controls">
              <button id="decrementLevel" class="btn-level">-</button>
              <input type="number" id="levelInput" value="1" min="1" max="45" readonly />
              <button id="incrementLevel" class="btn-level">+</button>
            </div>
          </div>

          <div class="stats-box">
            <p>отображать слотов: <strong><span id="displaySlots">5</span> из 28</strong></p>
            <p>звёзд за чекпоинт: <strong><span id="starsPerCheckpoint">10</span> из 33</strong></p>
            <hr class="divider">
            <p>Таймер: ускорение сек/тик<br>
              <strong><span id="timerSpeedDisplay">+0,089</span> из +4,005</strong>
            </p>
          </div>

          <div class="info-text">
            <p>Каждый прокачанный уровень добавляет:</p>
            <ul>
              <li>+0.089 к базовой скорости таймера за каждый уровень.</li>
              <li>+1 звезду к выплате за чекпоинт. Даётся за каждый второй прокачанный уровень.</li>
              <li>+1 слот за каждый второй прокачанный уровень.</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- БЛОК 2: РАЗГОН -->
      <div class="upgrade-block">
        <div class="upgrade-header">
          <strong>Разгон за рефералов</strong>
        </div>

        <div class="upgrade-content">
          <p>Очков рефералов получено: <strong><span id="refPoints">4</span></strong></p>
          <p>Выбери уровень прокачки</p>

          <div class="boost-levels">
            <button class="boost-btn" data-level="1">1 - 25%</button>
            <button class="boost-btn" data-level="2">2 - 50%</button>
            <button class="boost-btn" data-level="3">3 - 75%</button>
            <button class="boost-btn" data-level="4">4 - 100%</button>
            <button id="applyBoost" class="btn-apply-boost">применить<br>к чекпоинту</button>
          </div>

          <button id="inviteFriendBtn" class="btn-invite">Пригласить друга</button>

          <p class="info-text small">за одного приглашённого друга получаешь 1 очко реферала</p>
        </div>
      </div>

      <!-- БЛОК 3: ДОПОЛНИТЕЛЬНАЯ ВЫПЛАТА -->
      <div class="upgrade-block">
        <div class="upgrade-header">
          <strong>Дополнительная прокачка выплат</strong>
        </div>

        <div class="upgrade-content">
          <p>выплат за чекпоинт сейчас: <strong><span id="currentPayout">10</span></strong></p>
          <p>дополнительных звёзд куплено: <strong><span id="extraStarsBought">0</span></strong></p>
          <hr class="divider">

          <p class="highlight-title">Повысить выплату за чекпоинт на 1 звезду</p>
          <p class="cost">Цена: <strong><span id="payoutCost">10</span> звёзд</strong></p>
          <button id="buyPayout" class="btn-buy-payout">ПОВЫСИТЬ</button>

          <p class="info-text small">после покупки звёзды будут списаны с вашего аккаунта Telegram</p>
        </div>
      </div>
    </section>

    <!-- ПОКУПКА СЛОТА -->
    <section id="buy" class="page">
      <h2 class="section-title">Купить рекламный слот</h2>

      <div id="myAdSlots" class="slots-list"></div>

      <div class="buy-form">
        <label>Тип: 
          <select id="slotQuality">
            <option value="standard">Стандарт (1000 звёзд/день)</option>
            <option value="vip">VIP (5000 звёзд/день)</option>
          </select>
        </label>
        <label>Показов: 
          <select id="slotShows"></select>
        </label>
        <label>Дней: 
          <input type="number" id="slotDays" min="1" max="30" value="1" />
        </label>
        <div class="total-cost">Итого: <strong id="totalCost">1000</strong> звёзд</div>
        <button id="buySlotBtn" class="btn-primary">Купить слот</button>
      </div>
    </section>

  </div>

  <!-- НИЖНЕЕ МЕНЮ -->
  <nav class="bottom-nav">
    <button data-page="home" class="nav-item active"><span class="label">Статы<br>Аккаунт</span></button>
    <button data-page="subscriptions" class="nav-item"><span class="label">Слоты<br>Таймер</span></button>
    <button data-page="upgrade" class="nav-item"><span class="label">Прокачай<br>Таймер</span></button>
    <button data-page="buy" class="nav-item"><span class="label">Купи<br>Слоты</span></button>
  </nav>

  <script src="script.js"></script>
</body>
</html>